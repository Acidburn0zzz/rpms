--- dhcp-3.0.1/client/scripts/linux.change_resolv_conf	2004-08-02 10:45:38.818235000 -0400
+++ dhcp-3.0.1/client/scripts/linux	2004-08-02 10:46:25.359647000 -0400
@@ -37,18 +37,20 @@
 
   if [ -n "$new_domain_name" ] || [ -n "$new_domain_name_servers" ]; then
     save_previous /etc/resolv.conf
-    echo '; generated by /sbin/dhclient-script' > /etc/resolv.conf
+    rscf=`mktemp /tmp/XXXXXX`;
+    echo '; generated by /sbin/dhclient-script' > $rscf
     if [ -n "$SEARCH" ]; then
- 	echo search $SEARCH >> /etc/resolv.conf
+ 	echo search $SEARCH >> $rscf
     else
 	if [ -n "$new_domain_name" ]; then
- 	    echo search $new_domain_name >> /etc/resolv.conf
+ 	    echo search $new_domain_name >> $rscf
         fi
     fi
-    chmod 644 /etc/resolv.conf
     for nameserver in $new_domain_name_servers; do
-      echo nameserver $nameserver >>/etc/resolv.conf
+      echo nameserver $nameserver >> $rscf
     done
+    change_resolv_conf $rscf
+    rm -f $rscf
   fi
 }
 
